{"ast":null,"code":"// src/utils/geminiApi.js\nexport const callGeminiWithPrompt = async userPrompt => {\n  const systemPrompt = `B·∫°n l√† m·ªôt tr·ª£ l√Ω du l·ªãch th√¥ng minh v√† c√≥ th·ªÉ k·∫øt n·ªëi v·ªõi internet.\nV·ªõi m·ªói c√¢u h·ªèi, h√£y:\n1. Ki·ªÉm tra v√† cung c·∫•p th√¥ng tin d·ª± b√°o th·ªùi ti·∫øt ch√≠nh x√°c c·ªßa ƒë·ªãa ƒëi·ªÉm v√† ng√†y ƒë∆∞·ª£c h·ªèi.\n2. D·ª±a v√†o th·ªùi ti·∫øt ƒë√≥, ƒë∆∞a ra c√°c g·ª£i √Ω th·ª±c t·∫ø theo c·∫•u tr√∫c sau (ng·∫Øn g·ªçn, r√µ r√†ng, ‚â§200 tokens):\nüå§ D·ª± b√°o th·ªùi ti·∫øt: [th√¥ng tin th·ªùi ti·∫øt ch√≠nh x√°c ng√†y h√¥m ƒë√≥ t·∫°i ƒë·ªãa ƒëi·ªÉm]\nüéØ G·ª£i √Ω ho·∫°t ƒë·ªông: [ho·∫°t ƒë·ªông ph√π h·ª£p, n·∫øu th·ªùi ti·∫øt x·∫•u th√¨ khuy√™n kh√¥ng camping]\nüéí Danh s√°ch v·∫≠t d·ª•ng: [nh·ªØng ƒë·ªì c·∫ßn mang theo, ph√π h·ª£p th·ªùi ti·∫øt]\n‚ö†Ô∏è L∆∞u √Ω ƒë·∫∑c bi·ªát: [c·∫£nh b√°o ho·∫∑c l∆∞u √Ω an to√†n, s·ª©c kh·ªèe, giao th√¥ng]`;\n  const payload = {\n    contents: [{\n      role: \"user\",\n      parts: [{\n        text: `${systemPrompt}\\n\\nC√¢u h·ªèi: ${userPrompt}`\n      }]\n    }],\n    generationConfig: {\n      temperature: 0.7,\n      maxOutputTokens: 500 // gi·∫£m xu·ªëng cho g·ªçn\n    }\n  };\n  try {\n    var _data$candidates, _data$candidates$, _data$candidates$$con, _data$candidates$$con2, _data$candidates$$con3;\n    const response = await fetch(\"https://generativelanguage.googleapis.com/v1beta/models/gemini-1.5-flash:generateContent?key=AIzaSyD2l-YV0kiDkxdmNrac-dO-THEQVSWKdtE\", {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify(payload)\n    });\n    if (!response.ok) {\n      const text = await response.text();\n      throw new Error(`L·ªói Gemini: ${response.status} - ${text}`);\n    }\n    const data = await response.json();\n\n    // l·∫•y text t·ª´ candidates ƒë·∫ßu ti√™n\n    const result = data === null || data === void 0 ? void 0 : (_data$candidates = data.candidates) === null || _data$candidates === void 0 ? void 0 : (_data$candidates$ = _data$candidates[0]) === null || _data$candidates$ === void 0 ? void 0 : (_data$candidates$$con = _data$candidates$.content) === null || _data$candidates$$con === void 0 ? void 0 : (_data$candidates$$con2 = _data$candidates$$con.parts) === null || _data$candidates$$con2 === void 0 ? void 0 : (_data$candidates$$con3 = _data$candidates$$con2.map(p => p.text)) === null || _data$candidates$$con3 === void 0 ? void 0 : _data$candidates$$con3.join(\"\\n\");\n    return result || \"Kh√¥ng c√≥ ph·∫£n h·ªìi.\";\n  } catch (error) {\n    console.error(\"Gemini API error:\", error);\n    return \"ƒê√£ x·∫£y ra l·ªói khi g·ªçi Gemini API.\";\n  }\n};","map":{"version":3,"names":["callGeminiWithPrompt","userPrompt","systemPrompt","payload","contents","role","parts","text","generationConfig","temperature","maxOutputTokens","_data$candidates","_data$candidates$","_data$candidates$$con","_data$candidates$$con2","_data$candidates$$con3","response","fetch","method","headers","body","JSON","stringify","ok","Error","status","data","json","result","candidates","content","map","p","join","error","console"],"sources":["D:/Project_EXE/client/src/utils/gptApi.js"],"sourcesContent":["// src/utils/geminiApi.js\r\nexport const callGeminiWithPrompt = async (userPrompt) => {\r\n  const systemPrompt = `B·∫°n l√† m·ªôt tr·ª£ l√Ω du l·ªãch th√¥ng minh v√† c√≥ th·ªÉ k·∫øt n·ªëi v·ªõi internet.\r\nV·ªõi m·ªói c√¢u h·ªèi, h√£y:\r\n1. Ki·ªÉm tra v√† cung c·∫•p th√¥ng tin d·ª± b√°o th·ªùi ti·∫øt ch√≠nh x√°c c·ªßa ƒë·ªãa ƒëi·ªÉm v√† ng√†y ƒë∆∞·ª£c h·ªèi.\r\n2. D·ª±a v√†o th·ªùi ti·∫øt ƒë√≥, ƒë∆∞a ra c√°c g·ª£i √Ω th·ª±c t·∫ø theo c·∫•u tr√∫c sau (ng·∫Øn g·ªçn, r√µ r√†ng, ‚â§200 tokens):\r\nüå§ D·ª± b√°o th·ªùi ti·∫øt: [th√¥ng tin th·ªùi ti·∫øt ch√≠nh x√°c ng√†y h√¥m ƒë√≥ t·∫°i ƒë·ªãa ƒëi·ªÉm]\r\nüéØ G·ª£i √Ω ho·∫°t ƒë·ªông: [ho·∫°t ƒë·ªông ph√π h·ª£p, n·∫øu th·ªùi ti·∫øt x·∫•u th√¨ khuy√™n kh√¥ng camping]\r\nüéí Danh s√°ch v·∫≠t d·ª•ng: [nh·ªØng ƒë·ªì c·∫ßn mang theo, ph√π h·ª£p th·ªùi ti·∫øt]\r\n‚ö†Ô∏è L∆∞u √Ω ƒë·∫∑c bi·ªát: [c·∫£nh b√°o ho·∫∑c l∆∞u √Ω an to√†n, s·ª©c kh·ªèe, giao th√¥ng]`;\r\n\r\n  const payload = {\r\n    contents: [\r\n      {\r\n        role: \"user\",\r\n        parts: [\r\n          { text: `${systemPrompt}\\n\\nC√¢u h·ªèi: ${userPrompt}` }\r\n        ],\r\n      },\r\n    ],\r\n    generationConfig: {\r\n      temperature: 0.7,\r\n      maxOutputTokens: 500, // gi·∫£m xu·ªëng cho g·ªçn\r\n    },\r\n  };\r\n\r\n  try {\r\n    const response = await fetch(\r\n      \"https://generativelanguage.googleapis.com/v1beta/models/gemini-1.5-flash:generateContent?key=AIzaSyD2l-YV0kiDkxdmNrac-dO-THEQVSWKdtE\",\r\n      {\r\n        method: \"POST\",\r\n        headers: {\r\n          \"Content-Type\": \"application/json\",\r\n        },\r\n        body: JSON.stringify(payload),\r\n      }\r\n    );\r\n\r\n    if (!response.ok) {\r\n      const text = await response.text();\r\n      throw new Error(`L·ªói Gemini: ${response.status} - ${text}`);\r\n    }\r\n\r\n    const data = await response.json();\r\n\r\n    // l·∫•y text t·ª´ candidates ƒë·∫ßu ti√™n\r\n    const result = data?.candidates?.[0]?.content?.parts\r\n      ?.map(p => p.text)\r\n      ?.join(\"\\n\");\r\n\r\n    return result || \"Kh√¥ng c√≥ ph·∫£n h·ªìi.\";\r\n  } catch (error) {\r\n    console.error(\"Gemini API error:\", error);\r\n    return \"ƒê√£ x·∫£y ra l·ªói khi g·ªçi Gemini API.\";\r\n  }\r\n};\r\n"],"mappings":"AAAA;AACA,OAAO,MAAMA,oBAAoB,GAAG,MAAOC,UAAU,IAAK;EACxD,MAAMC,YAAY,GAAG;AACvB;AACA;AACA;AACA;AACA;AACA;AACA,uEAAuE;EAErE,MAAMC,OAAO,GAAG;IACdC,QAAQ,EAAE,CACR;MACEC,IAAI,EAAE,MAAM;MACZC,KAAK,EAAE,CACL;QAAEC,IAAI,EAAE,GAAGL,YAAY,gBAAgBD,UAAU;MAAG,CAAC;IAEzD,CAAC,CACF;IACDO,gBAAgB,EAAE;MAChBC,WAAW,EAAE,GAAG;MAChBC,eAAe,EAAE,GAAG,CAAE;IACxB;EACF,CAAC;EAED,IAAI;IAAA,IAAAC,gBAAA,EAAAC,iBAAA,EAAAC,qBAAA,EAAAC,sBAAA,EAAAC,sBAAA;IACF,MAAMC,QAAQ,GAAG,MAAMC,KAAK,CAC1B,sIAAsI,EACtI;MACEC,MAAM,EAAE,MAAM;MACdC,OAAO,EAAE;QACP,cAAc,EAAE;MAClB,CAAC;MACDC,IAAI,EAAEC,IAAI,CAACC,SAAS,CAACnB,OAAO;IAC9B,CACF,CAAC;IAED,IAAI,CAACa,QAAQ,CAACO,EAAE,EAAE;MAChB,MAAMhB,IAAI,GAAG,MAAMS,QAAQ,CAACT,IAAI,CAAC,CAAC;MAClC,MAAM,IAAIiB,KAAK,CAAC,eAAeR,QAAQ,CAACS,MAAM,MAAMlB,IAAI,EAAE,CAAC;IAC7D;IAEA,MAAMmB,IAAI,GAAG,MAAMV,QAAQ,CAACW,IAAI,CAAC,CAAC;;IAElC;IACA,MAAMC,MAAM,GAAGF,IAAI,aAAJA,IAAI,wBAAAf,gBAAA,GAAJe,IAAI,CAAEG,UAAU,cAAAlB,gBAAA,wBAAAC,iBAAA,GAAhBD,gBAAA,CAAmB,CAAC,CAAC,cAAAC,iBAAA,wBAAAC,qBAAA,GAArBD,iBAAA,CAAuBkB,OAAO,cAAAjB,qBAAA,wBAAAC,sBAAA,GAA9BD,qBAAA,CAAgCP,KAAK,cAAAQ,sBAAA,wBAAAC,sBAAA,GAArCD,sBAAA,CACXiB,GAAG,CAACC,CAAC,IAAIA,CAAC,CAACzB,IAAI,CAAC,cAAAQ,sBAAA,uBADLA,sBAAA,CAEXkB,IAAI,CAAC,IAAI,CAAC;IAEd,OAAOL,MAAM,IAAI,oBAAoB;EACvC,CAAC,CAAC,OAAOM,KAAK,EAAE;IACdC,OAAO,CAACD,KAAK,CAAC,mBAAmB,EAAEA,KAAK,CAAC;IACzC,OAAO,mCAAmC;EAC5C;AACF,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}