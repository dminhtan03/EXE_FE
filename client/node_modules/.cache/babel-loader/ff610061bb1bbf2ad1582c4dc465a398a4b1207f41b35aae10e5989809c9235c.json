{"ast":null,"code":"// src/utils/geminiApi.js\nimport { GoogleGenerativeAI } from \"@google/generative-ai\";\n\n// Lấy API key từ file .env (đặt tên biến REACT_APP_GEMINI_API_KEY trong .env)\nconst apiKey = process.env.REACT_APP_GEMINI_API_KEY;\n\n// Khởi tạo đối tượng GoogleGenerativeAI\nconst genAI = new GoogleGenerativeAI(apiKey);\n\n// Hàm gọi Gemini API với prompt của người dùng\nexport const callGeminiWithPrompt = async prompt => {\n  const systemPrompt = `Bạn là một trợ lý du lịch thông minh, có thể tư vấn dựa trên thời gian, địa điểm, mục đích chuyến đi. Với mỗi câu hỏi, hãy cung cấp:\n- Dự báo thời tiết (nếu có địa điểm và ngày cụ thể),\n- Gợi ý hoạt động phù hợp,\n- Danh sách vật dụng nên mang theo,\n- Lưu ý đặc biệt nếu có.\nTrả lời ngắn gọn, dễ hiểu, rõ ràng từng mục, thực tế và giới hạn trong 200 tokens.`;\n  try {\n    // Dùng model Gemini 1.5 Flash (miễn phí và nhanh)\n    const model = genAI.getGenerativeModel({\n      model: \"gemini-1.5-flash\"\n    });\n\n    // Tạo nội dung gửi đến Gemini\n    const result = await model.generateContent([{\n      role: \"system\",\n      parts: [{\n        text: systemPrompt\n      }]\n    }, {\n      role: \"user\",\n      parts: [{\n        text: prompt\n      }]\n    }]);\n\n    // Lấy kết quả phản hồi\n    const response = result.response;\n    return response.text();\n  } catch (error) {\n    console.error(\"Lỗi khi gọi Gemini API:\", error);\n    throw error;\n  }\n};","map":{"version":3,"names":["GoogleGenerativeAI","apiKey","process","env","REACT_APP_GEMINI_API_KEY","genAI","callGeminiWithPrompt","prompt","systemPrompt","model","getGenerativeModel","result","generateContent","role","parts","text","response","error","console"],"sources":["D:/Project_EXE/client/src/utils/gptApi.js"],"sourcesContent":["// src/utils/geminiApi.js\r\nimport { GoogleGenerativeAI } from \"@google/generative-ai\";\r\n\r\n// Lấy API key từ file .env (đặt tên biến REACT_APP_GEMINI_API_KEY trong .env)\r\nconst apiKey = process.env.REACT_APP_GEMINI_API_KEY;\r\n\r\n// Khởi tạo đối tượng GoogleGenerativeAI\r\nconst genAI = new GoogleGenerativeAI(apiKey);\r\n\r\n// Hàm gọi Gemini API với prompt của người dùng\r\nexport const callGeminiWithPrompt = async (prompt) => {\r\n  const systemPrompt = `Bạn là một trợ lý du lịch thông minh, có thể tư vấn dựa trên thời gian, địa điểm, mục đích chuyến đi. Với mỗi câu hỏi, hãy cung cấp:\r\n- Dự báo thời tiết (nếu có địa điểm và ngày cụ thể),\r\n- Gợi ý hoạt động phù hợp,\r\n- Danh sách vật dụng nên mang theo,\r\n- Lưu ý đặc biệt nếu có.\r\nTrả lời ngắn gọn, dễ hiểu, rõ ràng từng mục, thực tế và giới hạn trong 200 tokens.`;\r\n\r\n  try {\r\n    // Dùng model Gemini 1.5 Flash (miễn phí và nhanh)\r\n    const model = genAI.getGenerativeModel({ model: \"gemini-1.5-flash\" });\r\n\r\n    // Tạo nội dung gửi đến Gemini\r\n    const result = await model.generateContent([\r\n      { role: \"system\", parts: [{ text: systemPrompt }] },\r\n      { role: \"user\", parts: [{ text: prompt }] }\r\n    ]);\r\n\r\n    // Lấy kết quả phản hồi\r\n    const response = result.response;\r\n    return response.text();\r\n  } catch (error) {\r\n    console.error(\"Lỗi khi gọi Gemini API:\", error);\r\n    throw error;\r\n  }\r\n};\r\n"],"mappings":"AAAA;AACA,SAASA,kBAAkB,QAAQ,uBAAuB;;AAE1D;AACA,MAAMC,MAAM,GAAGC,OAAO,CAACC,GAAG,CAACC,wBAAwB;;AAEnD;AACA,MAAMC,KAAK,GAAG,IAAIL,kBAAkB,CAACC,MAAM,CAAC;;AAE5C;AACA,OAAO,MAAMK,oBAAoB,GAAG,MAAOC,MAAM,IAAK;EACpD,MAAMC,YAAY,GAAG;AACvB;AACA;AACA;AACA;AACA,mFAAmF;EAEjF,IAAI;IACF;IACA,MAAMC,KAAK,GAAGJ,KAAK,CAACK,kBAAkB,CAAC;MAAED,KAAK,EAAE;IAAmB,CAAC,CAAC;;IAErE;IACA,MAAME,MAAM,GAAG,MAAMF,KAAK,CAACG,eAAe,CAAC,CACzC;MAAEC,IAAI,EAAE,QAAQ;MAAEC,KAAK,EAAE,CAAC;QAAEC,IAAI,EAAEP;MAAa,CAAC;IAAE,CAAC,EACnD;MAAEK,IAAI,EAAE,MAAM;MAAEC,KAAK,EAAE,CAAC;QAAEC,IAAI,EAAER;MAAO,CAAC;IAAE,CAAC,CAC5C,CAAC;;IAEF;IACA,MAAMS,QAAQ,GAAGL,MAAM,CAACK,QAAQ;IAChC,OAAOA,QAAQ,CAACD,IAAI,CAAC,CAAC;EACxB,CAAC,CAAC,OAAOE,KAAK,EAAE;IACdC,OAAO,CAACD,KAAK,CAAC,yBAAyB,EAAEA,KAAK,CAAC;IAC/C,MAAMA,KAAK;EACb;AACF,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}