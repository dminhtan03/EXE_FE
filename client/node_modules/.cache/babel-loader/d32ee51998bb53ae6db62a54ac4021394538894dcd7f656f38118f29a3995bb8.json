{"ast":null,"code":"// src/utils/geminiApi.js\n// Báº¡n lÃ  má»™t trá»£ lÃ½ du lá»‹ch thÃ´ng minh. Vá»›i má»—i cÃ¢u há»i, hÃ£y:\n//\n// 1. Kiá»ƒm tra vÃ  cung cáº¥p thÃ´ng tin dá»± bÃ¡o thá»i tiáº¿t chÃ­nh xÃ¡c cá»§a Ä‘á»‹a Ä‘iá»ƒm vÃ  ngÃ y Ä‘Æ°á»£c há»i.\n// 2. Dá»±a vÃ o thá»i tiáº¿t Ä‘Ã³, Ä‘Æ°a ra cÃ¡c gá»£i Ã½ thá»±c táº¿ theo cáº¥u trÃºc sau (ngáº¯n gá»n, rÃµ rÃ ng, â‰¤200 tokens):\n//\n// ðŸŒ¤ Dá»± bÃ¡o thá»i tiáº¿t: [thÃ´ng tin thá»i tiáº¿t chÃ­nh xÃ¡c ngÃ y hÃ´m Ä‘Ã³ táº¡i Ä‘á»‹a Ä‘iá»ƒm]\n// ðŸŽ¯ Gá»£i Ã½ hoáº¡t Ä‘á»™ng: [hoáº¡t Ä‘á»™ng phÃ¹ há»£p, náº¿u thá»i tiáº¿t xáº¥u thÃ¬ khuyÃªn khÃ´ng camping]\n// ðŸŽ’ Danh sÃ¡ch váº­t dá»¥ng: [nhá»¯ng Ä‘á»“ cáº§n mang theo, phÃ¹ há»£p thá»i tiáº¿t]\n// âš ï¸ LÆ°u Ã½ Ä‘áº·c biá»‡t: [cáº£nh bÃ¡o hoáº·c lÆ°u Ã½ an toÃ n, sá»©c khá»e, giao thÃ´ng]\n\nconst GEMINI_API_URL = \"https://generativelanguage.googleapis.com/v1beta/models/gemini-1.5-flash:generateContent?key=AIzaSyD2l-YV0kiDkxdmNrac-dO-THEQVSWKdtE\";\n\n// HÃ m gá»i chung\nconst callGemini = async (system_prompt, prompt) => {\n  const payload = {\n    contents: [{\n      role: \"user\",\n      parts: [{\n        text: system_prompt\n      }, {\n        text: prompt\n      }]\n    }],\n    generationConfig: {\n      temperature: 0.7,\n      maxOutputTokens: 1000\n    }\n  };\n  try {\n    var _data$candidates, _data$candidates$, _data$candidates$$con, _data$candidates$$con2, _data$candidates$$con3;\n    const response = await fetch(GEMINI_API_URL, {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify(payload)\n    });\n    if (!response.ok) {\n      const text = await response.text();\n      throw new Error(`Lá»—i Gemini: ${response.status} - ${text}`);\n    }\n    const data = await response.json();\n    return (data === null || data === void 0 ? void 0 : (_data$candidates = data.candidates) === null || _data$candidates === void 0 ? void 0 : (_data$candidates$ = _data$candidates[0]) === null || _data$candidates$ === void 0 ? void 0 : (_data$candidates$$con = _data$candidates$.content) === null || _data$candidates$$con === void 0 ? void 0 : (_data$candidates$$con2 = _data$candidates$$con.parts) === null || _data$candidates$$con2 === void 0 ? void 0 : (_data$candidates$$con3 = _data$candidates$$con2[0]) === null || _data$candidates$$con3 === void 0 ? void 0 : _data$candidates$$con3.text) || \"KhÃ´ng cÃ³ pháº£n há»“i.\";\n  } catch (error) {\n    console.error(\"Gemini API error:\", error);\n    throw error;\n  }\n};\n\n// 1ï¸âƒ£ TrÃ­ch xuáº¥t Ä‘á»‹a Ä‘iá»ƒm vÃ  thá»i gian\nexport const extractTimeAndLocation = async prompt => {\n  const system_prompt = `Báº¡n lÃ  má»™t trá»£ lÃ½ phÃ¢n tÃ­ch thÃ´ng tin du lá»‹ch.\nTá»« cÃ¢u há»i cá»§a ngÆ°á»i dÃ¹ng, hÃ£y tráº£ vá» káº¿t quáº£ dÆ°á»›i dáº¡ng JSON Ä‘Ãºng chuáº©n, khÃ´ng cÃ³ chá»¯ thá»«a:\n{\n  \"location\": \"tÃªn Ä‘á»‹a Ä‘iá»ƒm hoáº·c 'KhÃ´ng xÃ¡c Ä‘á»‹nh'\",\n  \"date\": \"YYYY-MM-DD hoáº·c 'KhÃ´ng xÃ¡c Ä‘á»‹nh'\"\n}`;\n  const result = await callGemini(system_prompt, prompt);\n  try {\n    return JSON.parse(result);\n  } catch (e) {\n    console.error(\"Lá»—i parse JSON tá»« Gemini:\", result);\n    return {\n      location: \"KhÃ´ng xÃ¡c Ä‘á»‹nh\",\n      date: \"KhÃ´ng xÃ¡c Ä‘á»‹nh\"\n    };\n  }\n};\n\n// 2ï¸âƒ£ TÆ° váº¥n chuyáº¿n Ä‘i\nexport const getTravelAdvice = async prompt => {\n  const system_prompt = `Báº¡n lÃ  má»™t trá»£ lÃ½ du lá»‹ch thÃ´ng minh, cÃ³ thá»ƒ tÆ° váº¥n dá»±a trÃªn thá»i gian, Ä‘á»‹a Ä‘iá»ƒm, má»¥c Ä‘Ã­ch chuyáº¿n Ä‘i. \nVá»›i má»—i cÃ¢u há»i, hÃ£y cung cáº¥p cÃ¢u tráº£ lá»i theo cáº¥u trÃºc sau:\nðŸŒ¤ Thá»i tiáº¿t: [ná»™i dung]\\n\nðŸŽ’ Má»™t sá»‘ Ä‘Æ¡n vá»‹ cho thuÃª dá»‹ch vá»¥ vÃ  má»™t sá»‘ Ä‘iá»ƒm ná»•i báº­t [ná»™i dung]\\n\nðŸŽ¯ Gá»£i Ã½ hoáº¡t Ä‘á»™ng: [hoáº¡t Ä‘á»™ng phÃ¹ há»£p, náº¿u thá»i tiáº¿t xáº¥u thÃ¬ khuyÃªn khÃ´ng camping]\\n\nðŸŽ’ Danh sÃ¡ch váº­t dá»¥ng: [nhá»¯ng Ä‘á»“ cáº§n mang theo, phÃ¹ há»£p thá»i tiáº¿t]\\n\nâš ï¸ LÆ°u Ã½ Ä‘áº·c biá»‡t: [cáº£nh bÃ¡o hoáº·c lÆ°u Ã½ an toÃ n, sá»©c khá»e, giao thÃ´ng]\\n\nTráº£ lá»i ngáº¯n gá»n, rÃµ rÃ ng tá»«ng má»¥c, má»—i pháº§n â‰¤75 tá»«.`;\n  return await callGemini(system_prompt, prompt);\n};\n\n// 3ï¸âƒ£ Flow Ä‘áº§y Ä‘á»§: phÃ¢n tÃ­ch + tÆ° váº¥n\nexport const getTravelPlan = async userPrompt => {\n  const extracted = await extractTimeAndLocation(userPrompt);\n  const advice = await getTravelAdvice(userPrompt);\n  return {\n    extractedInfo: extracted,\n    advice\n  };\n};","map":{"version":3,"names":["GEMINI_API_URL","callGemini","system_prompt","prompt","payload","contents","role","parts","text","generationConfig","temperature","maxOutputTokens","_data$candidates","_data$candidates$","_data$candidates$$con","_data$candidates$$con2","_data$candidates$$con3","response","fetch","method","headers","body","JSON","stringify","ok","Error","status","data","json","candidates","content","error","console","extractTimeAndLocation","result","parse","e","location","date","getTravelAdvice","getTravelPlan","userPrompt","extracted","advice","extractedInfo"],"sources":["D:/Project_EXE/client/src/utils/geminiApi.js"],"sourcesContent":["// src/utils/geminiApi.js\r\n// Báº¡n lÃ  má»™t trá»£ lÃ½ du lá»‹ch thÃ´ng minh. Vá»›i má»—i cÃ¢u há»i, hÃ£y:\r\n//\r\n// 1. Kiá»ƒm tra vÃ  cung cáº¥p thÃ´ng tin dá»± bÃ¡o thá»i tiáº¿t chÃ­nh xÃ¡c cá»§a Ä‘á»‹a Ä‘iá»ƒm vÃ  ngÃ y Ä‘Æ°á»£c há»i.\r\n// 2. Dá»±a vÃ o thá»i tiáº¿t Ä‘Ã³, Ä‘Æ°a ra cÃ¡c gá»£i Ã½ thá»±c táº¿ theo cáº¥u trÃºc sau (ngáº¯n gá»n, rÃµ rÃ ng, â‰¤200 tokens):\r\n//\r\n// ðŸŒ¤ Dá»± bÃ¡o thá»i tiáº¿t: [thÃ´ng tin thá»i tiáº¿t chÃ­nh xÃ¡c ngÃ y hÃ´m Ä‘Ã³ táº¡i Ä‘á»‹a Ä‘iá»ƒm]\r\n// ðŸŽ¯ Gá»£i Ã½ hoáº¡t Ä‘á»™ng: [hoáº¡t Ä‘á»™ng phÃ¹ há»£p, náº¿u thá»i tiáº¿t xáº¥u thÃ¬ khuyÃªn khÃ´ng camping]\r\n// ðŸŽ’ Danh sÃ¡ch váº­t dá»¥ng: [nhá»¯ng Ä‘á»“ cáº§n mang theo, phÃ¹ há»£p thá»i tiáº¿t]\r\n// âš ï¸ LÆ°u Ã½ Ä‘áº·c biá»‡t: [cáº£nh bÃ¡o hoáº·c lÆ°u Ã½ an toÃ n, sá»©c khá»e, giao thÃ´ng]\r\n\r\nconst GEMINI_API_URL =\r\n  \"https://generativelanguage.googleapis.com/v1beta/models/gemini-1.5-flash:generateContent?key=AIzaSyD2l-YV0kiDkxdmNrac-dO-THEQVSWKdtE\";\r\n\r\n// HÃ m gá»i chung\r\nconst callGemini = async (system_prompt, prompt) => {\r\n  const payload = {\r\n    contents: [\r\n      {\r\n        role: \"user\",\r\n        parts: [{ text: system_prompt }, { text: prompt }],\r\n      },\r\n    ],\r\n    generationConfig: {\r\n      temperature: 0.7,\r\n      maxOutputTokens: 1000,\r\n    },\r\n  };\r\n\r\n  try {\r\n    const response = await fetch(GEMINI_API_URL, {\r\n      method: \"POST\",\r\n      headers: { \"Content-Type\": \"application/json\" },\r\n      body: JSON.stringify(payload),\r\n    });\r\n\r\n    if (!response.ok) {\r\n      const text = await response.text();\r\n      throw new Error(`Lá»—i Gemini: ${response.status} - ${text}`);\r\n    }\r\n\r\n    const data = await response.json();\r\n    return (\r\n      data?.candidates?.[0]?.content?.parts?.[0]?.text || \"KhÃ´ng cÃ³ pháº£n há»“i.\"\r\n    );\r\n  } catch (error) {\r\n    console.error(\"Gemini API error:\", error);\r\n    throw error;\r\n  }\r\n};\r\n\r\n// 1ï¸âƒ£ TrÃ­ch xuáº¥t Ä‘á»‹a Ä‘iá»ƒm vÃ  thá»i gian\r\nexport const extractTimeAndLocation = async (prompt) => {\r\n  const system_prompt = `Báº¡n lÃ  má»™t trá»£ lÃ½ phÃ¢n tÃ­ch thÃ´ng tin du lá»‹ch.\r\nTá»« cÃ¢u há»i cá»§a ngÆ°á»i dÃ¹ng, hÃ£y tráº£ vá» káº¿t quáº£ dÆ°á»›i dáº¡ng JSON Ä‘Ãºng chuáº©n, khÃ´ng cÃ³ chá»¯ thá»«a:\r\n{\r\n  \"location\": \"tÃªn Ä‘á»‹a Ä‘iá»ƒm hoáº·c 'KhÃ´ng xÃ¡c Ä‘á»‹nh'\",\r\n  \"date\": \"YYYY-MM-DD hoáº·c 'KhÃ´ng xÃ¡c Ä‘á»‹nh'\"\r\n}`;\r\n  const result = await callGemini(system_prompt, prompt);\r\n\r\n  try {\r\n    return JSON.parse(result);\r\n  } catch (e) {\r\n    console.error(\"Lá»—i parse JSON tá»« Gemini:\", result);\r\n    return { location: \"KhÃ´ng xÃ¡c Ä‘á»‹nh\", date: \"KhÃ´ng xÃ¡c Ä‘á»‹nh\" };\r\n  }\r\n};\r\n\r\n\r\n// 2ï¸âƒ£ TÆ° váº¥n chuyáº¿n Ä‘i\r\nexport const getTravelAdvice = async (prompt) => {\r\n  const system_prompt = `Báº¡n lÃ  má»™t trá»£ lÃ½ du lá»‹ch thÃ´ng minh, cÃ³ thá»ƒ tÆ° váº¥n dá»±a trÃªn thá»i gian, Ä‘á»‹a Ä‘iá»ƒm, má»¥c Ä‘Ã­ch chuyáº¿n Ä‘i. \r\nVá»›i má»—i cÃ¢u há»i, hÃ£y cung cáº¥p cÃ¢u tráº£ lá»i theo cáº¥u trÃºc sau:\r\nðŸŒ¤ Thá»i tiáº¿t: [ná»™i dung]\\n\r\nðŸŽ’ Má»™t sá»‘ Ä‘Æ¡n vá»‹ cho thuÃª dá»‹ch vá»¥ vÃ  má»™t sá»‘ Ä‘iá»ƒm ná»•i báº­t [ná»™i dung]\\n\r\nðŸŽ¯ Gá»£i Ã½ hoáº¡t Ä‘á»™ng: [hoáº¡t Ä‘á»™ng phÃ¹ há»£p, náº¿u thá»i tiáº¿t xáº¥u thÃ¬ khuyÃªn khÃ´ng camping]\\n\r\nðŸŽ’ Danh sÃ¡ch váº­t dá»¥ng: [nhá»¯ng Ä‘á»“ cáº§n mang theo, phÃ¹ há»£p thá»i tiáº¿t]\\n\r\nâš ï¸ LÆ°u Ã½ Ä‘áº·c biá»‡t: [cáº£nh bÃ¡o hoáº·c lÆ°u Ã½ an toÃ n, sá»©c khá»e, giao thÃ´ng]\\n\r\nTráº£ lá»i ngáº¯n gá»n, rÃµ rÃ ng tá»«ng má»¥c, má»—i pháº§n â‰¤75 tá»«.`;\r\n  return await callGemini(system_prompt, prompt);\r\n};\r\n\r\n// 3ï¸âƒ£ Flow Ä‘áº§y Ä‘á»§: phÃ¢n tÃ­ch + tÆ° váº¥n\r\nexport const getTravelPlan = async (userPrompt) => {\r\n  const extracted = await extractTimeAndLocation(userPrompt);\r\n  const advice = await getTravelAdvice(userPrompt);\r\n  return {\r\n    extractedInfo: extracted,\r\n    advice,\r\n  };\r\n};\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}